## Практика и Git

Зайдем в любую папку, например `/tmp/`, используя терминал (больше информации о терминале [тут](https://vectree.ru/digest/0/19)):

`cd /tmp/`

Создадим там папку `hello`, в которой будет наш проект с помощью команды:

`mkdir hello`

Перейдем в нее:

`cd hello`

Инициализируем git-репозиторий:

`git init`

По итогу получим сообщение:

`Initialized empty Git repository in /tmp/hello/.git/`

которое означает, что мы успешно создали репозиторий. Теперь мы можем сохранять информацию о изменениях в файлах. Ура!

Проверим. Создадим файл **README.md** с помощью команды:

`touch README.md`

Зайдем в файл **README.md**:

`nano README.md`

И добавим строчку `Hello world!`.

## Три состояния

Прежде чем перейти к следующей команде поговорим о состояниях, в которых могут быть файлы. 

![alt text](https://user-images.githubusercontent.com/4215285/47952753-64d31680-df85-11e8-8af7-65c2ef589da3.png)

Каждый файл в git может быть в двух состояниях: 
- *Отслеживаемые* - под версионным контролем, которые хранятся в последнем коммите. Это состояние делится на три подсостояния:
    * Зафиксированные (**committed**) - сохраненные в локальной базе;
    * Подготовленные (**staged**) - отмеченные для включения в следующий коммит;
    * Измененные (**modified**) - файлы, изменения которых не были зафиксированы;
- *Неотслеживаемые* - все остальные файлы.

Больше информации вы можете узнать [тут](https://git-scm.com/book/ru/v2/%D0%92%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5-%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D1%8B-Git).

## Три секции

![alt text](https://user-images.githubusercontent.com/4215285/47952756-68ff3400-df85-11e8-84a8-e5c5783fd76a.png)

Git состоит их трех секций:
* *Git-директория (.git directory)* - та часть git'а, в которой хранятся все снимки, все метаданные проекта;
* *Рабочая директория (working directory)* - то, что вы видите, зайдя в свой проект. По сути рабочая директория - это текущий выбранный вами снимок, файлы которого вы можете менять.
* *Область подготовленных файлов (Staging Area, Индекс)* - тут хранится информация о файлах, которые попадут в следующий коммит.

Больше информации вы можете узнать [тут](https://git-scm.com/book/ru/v2/%D0%92%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5-%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D1%8B-Git).

## Продолжим практическую часть

Теперь введем команду, которая проверяет состояние файлов в репозитории:

`git status`

И получим следующие строчки:

```bash
Untracked files:
  (use "git add <file>..." to include in what will be committed)

    README.md
```
![alt text](https://user-images.githubusercontent.com/4215285/47952774-a5329480-df85-11e8-8a68-99b1bd2ed8b7.png)

Git показал нам, что **README.md** находится в секции `Untracked files`. То есть **README.md** - **неотслеживаемый** файл (см. рисунок выше).

Чтоб добавить данный файл в следующий снимок, введите команду `git add README.md`.

![alt text](https://user-images.githubusercontent.com/4215285/47952792-f5a9f200-df85-11e8-9494-89676648d3d4.png)

Теперь при вызове `git status` мы увидем, что **README.md** добавлен в **Staging Area** - область подготовленных файлов для последующего коммита (см. рисунок выше):

```bash
Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)

    new file:   README.md
```

Итак, мы добавили все необходимые изменения. Теперь мы хотим создать снимок. Вводим команду:

`git commit`

У вас октроется редактор, в котором вы можете ввести комментраий к коммиту. Старайтесь писать то, что было сделано в рамках данного коммита. В данном случае: `Мы добавили файл README.md`.

![alt text](https://user-images.githubusercontent.com/4215285/47952908-37876800-df87-11e8-89b7-fad96bbf74bf.png)

В итоге изменения внесенные нами стали зафиксированными и файл был добавлен в git-директорию (см. рисунок выше).

Отлично. Теперь давайте попробуем изменить наш файл **README.md**. 

`nano README.md`

И добавим или изменим предыдущую строку: `Привет Мир!`.

В итоге, при вызове `git status` мы получим следующий вывод:

```bash
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

    modified:   README.md
```

![alt text](https://user-images.githubusercontent.com/4215285/47952997-3d317d80-df88-11e8-82ef-4a3f666cd42d.png)

Наши файл находится в измененном состоянии (см. рисунок выше).

Проделаем ту же последовательность комманд: `git add`, `git commit` и добавим наши изменения в снимок.

## Работа с Github

Перейдем к работе с github. Итак, чтобы создать репозиторий на github переходим [сюда](https://github.com/new).
Вводим название, описание.

Чтобы инициализировать наш удаленный репозиторий, введем команду:

`git remote add origin https://github.com/[ваш_логин]/[имя_репозитория]`

Затем:

`git push -u origin master`

Команда **push** позволит вам отправить изменения, которые вы внесли в своем локальном репозитории, на удаленный репозиторий.
В результате, обновив страницу репозитория, мы увидем там наш файл **README.md**.

Давайте изменим наш файл в github. Для этого:
1. Нажимаем на файл **README.md**;
2. Затем на карандашик. 
3. Меняем текст на любой.
4. Снизу пишем комментарий к коммиту и нажимаем `Commit changes`.

Чтобы получить эти изменения на вашем компьютере, выполним команду:

`git pull origin master`

## Ветвление

Перейдем к не менее интересной теме - ветвление. Работая в команде, вы решайте множество различных задач и обычно для каждой задачи создается отдельная ветка в репозитории, что позволяет не вмешиваться в основную линию. Хороший пример [тут](https://git-scm.com/book/ru/v2/%D0%92%D0%B5%D1%82%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B2-Git-%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D1%8B-%D0%B2%D0%B5%D1%82%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F-%D0%B8-%D1%81%D0%BB%D0%B8%D1%8F%D0%BD%D0%B8%D1%8F).

![alt text](https://user-images.githubusercontent.com/4215285/47967692-55c99280-e071-11e8-8299-fbc4b39275ca.png)

Ветка в git по сути является указателем на коммит. На рисунке выше есть две ветки: **master** (основная ветка) и **english**. Ветка **master** указывает на коммит **C31**. Ветка **english** указывает на коммит **C42**. Каждый раз, когда мы делаем коммит, указатель текущей ветки будет "передвигаться" на него.

Как определить на какой мы ветке? Для этого есть специальный указатель - `HEAD`. С помощью команды `git checkout [ветка]` мы можем менять ветку и соответсвенно указатель `HEAD`. В примере выше текущая ветка - **master**.

![alt text](https://user-images.githubusercontent.com/4215285/47967398-d9818000-e06d-11e8-9095-a8baff0b3552.png)

Рассмотрим ветвление на предыдущем примере (см. рисунок выше). Итак, мы сделали два коммита (**С1** и **C2**).
Вдруг нашему разработчику пришло в голову вернуть английский в файл и посмотреть результат. 

Для данной задачи создаем отдельную ветку **english** командой:

`git branch english`

Теперь внося изменения, мы не будем влиять на главную ветку. 

Меняем файл **README.md** и добавим строку `Hello World!`, затем `git add .` и `git commit`.

В результате получим ветвление и коммит **C32** (см. рисунок выше).

Больше информации о ветвлении [тут](https://git-scm.com/book/ru/v2/%D0%92%D0%B5%D1%82%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B2-Git-%D0%9E-%D0%B2%D0%B5%D1%82%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B8-%D0%B2-%D0%B4%D0%B2%D1%83%D1%85-%D1%81%D0%BB%D0%BE%D0%B2%D0%B0%D1%85).

> Обычно в проектах для каждой задачи создаются отдельные ветки, что упрощает разработку.

## Решаем конфликты

В предыдущем примере у нас было две ветки: **master**, **english**. Мы закончили работу на задачей по переводу на английский и хотим слить эти изменения в основную ветку.

![alt text](https://user-images.githubusercontent.com/4215285/47991043-14c99080-e0fa-11e8-8297-e1531a3015ed.png)

Для этого мы переходим в ветку **master** с помощью команды:

`git checkout master`

Теперь сольем ветку **english** в **master**:

`git merge english`

Если у вас есть конфликты, которые нельзя автоматически слить, то вы получите следующие строчки:

```bash
Auto-merging index.html
CONFLICT (content): Merge conflict in README.md
Automatic merge failed; fix conflicts and then commit the result.
```

Вам необходимо зайти в файл **README.md**, там будут несколько разделов:

```text
<<<<<<< HEAD:README.md
Привет Всем!
=======
Hello World!
>>>>>>> english:README.md
```

Верхняя часть с текущей ветки (**master**). Нижняя часть с ветки **english**.
Решаем этот конфлик, оставив необходимый текст. Делаем `git add .`, `git commit`.

> На самом деле лучше использовать для решения конфликтов графический редактор.
> Например: Intellij Idea имеет втроенный резолвер конфликтов.

## Итог

Мы рассмотрели основные понятия, связанные с системой контроля версий **Git**. Ваша задача изучить их более подробно, используя материалы на плафторме [vectree](https://vectree.ru/vector/1/0).
