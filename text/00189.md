## Безопасность API

### Введение

Безопасность вашего API - важный шаг. Когда мы использовали Express для обслуживания представлений, мы использовали passport.js с именем пользователя и паролем для аутентификации, но это не единственный способ защитить приложение Express. В контексте API часто имеет смысл использовать другую стратегию. Метод создания сеанса по имени пользователя и паролю, который мы изучили ранее, будет работать. Но он усложняется тем, что мы отделили наш код фронтенда от бэкенда, поэтому нам нужно каждый раз при доступе отправлять имя пользователя / пароль для проверки подлинности.

Лучшая стратегия - генерировать и передавать защищенный **токен** между нашей базой данных и фронтенд кодом. Это гарантирует, что имя пользователя и пароль не будут скомпрометированы, а также даст нам возможность по истечении времени удалить сессию нашего пользователя для дополнительной безопасности. Идея заключается в том, что когда пользователь входит в наше приложение, создается защищенный токен, а затем для всех последующих запросов этот токен передается в заголовке нашего запроса. В конечном итоге, процесс довольно прост, так как у нас уже есть опыт работы с passport.js.

Эта стратегия очень полезна для работы с API, но вы можете также использовать ее с проектом, основанным на выдаче представлений. Основное отличие состоит в том, что вместо установки и проверки файла cookie мы передаем специальный токен в заголовке нашего запроса. В нашем предыдущем уроке по аутентификации middleware проверял файл cookie, а затем либо выполнял аутентификацию пользователя, либо нет. Сейчас мы собираемся сделать что-то очень похожее, но вместо куки мы собираемся передать токен.

### Задание

1. [Это видео](https://www.youtube.com/watch?v=7nafaH9SddU) - отличный материал, который объясняет все, что вам нужно знать о создании и JSON Web Tokens. На русском есть [анлогичные видео](https://www.youtube.com/watch?v=vQldMjSJ6-w);
2. [Эта статья](https://medium.com/front-end-weekly/learn-using-jwt-with-passport-authentication-9761539c4314) описывает настройку JSON Web Tokens в passport.js, который вы уже знаете. Тут вам _действительно_ не нужен паспорт, но он выполняет много рутинной работы, которую лектор в видео сделал своими руками. На русском вы можете изучить [данную статью](https://medium.com/nuances-of-programming/%D1%83%D1%87%D0%B8%D0%BC%D1%81%D1%8F-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D1%82%D1%8C-%D1%81-%D0%B0%D1%83%D1%82%D0%B5%D0%BD%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D0%B5%D0%B9-%D0%B2-node-%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D1%8F-passport-js-58c14b9fe823).

### Дополнительные ресурсы

_Этот раздел содержит полезные ссылки на дополнительные материалы. Они не обязательны, так что расценивайте их как нечто полезное, если вы хотите поглубже погрузиться в тему:_

- <span class="btn-fill btn btn-xs btn-success">eng</span> [Сложная статья](https://medium.com/swlh/a-practical-guide-for-jwt-authentication-using-nodejs-and-express-d48369e7e6d4), которая дает более глубокое понимание темы;
- <span class="btn-fill btn btn-xs btn-success">eng</span> [Эта статья](https://medium.com/@paul.allies/stateless-auth-with-express-passport-jwt-7a55ffae0a5c) охватывает то же самое, что и вышеприведенная, но более краткая. Может быть хорошим справочным пособием, когда вы вернетесь к настройке всего необходимого в проекте;
- [Статья на русском](https://habr.com/ru/company/ruvds/blog/457700/), в которой рассказывается как реализовать работу с jwt без passport.js;
- [Еще одна статья](https://vk.com/@loftblog-express-passport-i-json-web-token-jwt-autentifikaciya-dlya-n), в которой рассказывается об основах работы с JWT.
