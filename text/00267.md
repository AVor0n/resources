## Шаблоны Django

Пришло время отобразить данные на сайте! Django поможет нам с этим при помощи встроенных **тегов шаблонов**.

### Что представляют из себя теги шаблонов?

Как видите, в HTML нельзя помещать код Python, поскольку браузеры не понимают его. Они знают только HTML. Мы помним, что HTML статичен, в то время как Python позволяет динамические изменения.

__Теги шаблонов Django__ позволяют нам вставлять Python в HTML, так что вы можете создавать динамические веб-сайты быстрее и проще. То, что надо!

### Отображаем шаблон списка записей

В предыдущей главе мы передали нашему шаблону список записей в переменной `posts`. Теперь мы отобразим его в HTML.

Чтобы вставить переменную в шаблон Django, нам нужно использовать двойные фигурные скобки с именем переменной внутри:

```html
{{ posts }}
```

Попробуйте это в шаблоне `blog/templates/blog/post_list.html`. Замените всё, начиная со второго `<div>` и вплоть до третьего `</div>` кодом `{{ posts }}`. Сохраните файл и обновите страницу, чтобы увидеть результат:

![Рисунок 13.1][1]

 [1]: https://user-images.githubusercontent.com/4215285/72191659-079de500-3414-11ea-9be5-e71ac71bb4e7.png

Как вы можете заметить, мы получили следующую строку:

```html
<QuerySet [<Post: My second post>, <Post: My first post>]>
```

Это показывает, что Django понял переменную как список объектов. Помните из главы __Введение в Python__, как мы можем аккуратно отобразить список? Правильно, циклом for! В шаблонах Django вы можете использовать их таким образом:

```html
{% for post in posts %}
    {{ post }}
{% endfor %}
```

Попробуйте вставить это в свой шаблон.

![Рисунок 13.2][2]

 [2]: https://user-images.githubusercontent.com/4215285/72191698-24d2b380-3414-11ea-9268-75e9156712c7.png

Сработало! Но мы хотим, чтобы они отображались как статические записи, которые мы создавали в главе __Введение в HTML__. Вы можете смешивать HTML и теги шаблонов. Наш элемент `body` будет выглядеть следующим образом:

```html
<div>
    <h1><a href="/">Django Girls Blog</a></h1>
</div>

{% for post in posts %}
    <div>
        <p>published: {{ post.published_date }}</p>
        <h1><a href="">{{ post.title }}</a></h1>
        <p>{{ post.text|linebreaksbr }}</p>
    </div>
{% endfor %}
```

Всё, что вы поместите между `{% for %}` и `{% endfor %}`, будет повторено для каждого объекта в списке. Обновите страницу:

![Рисунок 13.3][3]

 [3]: https://user-images.githubusercontent.com/4215285/72191702-27cda400-3414-11ea-9e7a-7ba1f721bece.png

ВЫ заметили, что мы использовали немного другую запись в этот раз: `{{ post.title }}` или `{{ post.text }}`? Мы обращаемся к различным полям нашей модели `Post`. Также `|linebreaksbr` прогоняет текст через фильтр для преобразования переносов строк в параграфы.

### Ещё один момент

Пришло время ещё раз убедиться, что наш сайт будет работать в сети, согласны? Попробуем развернуть новую версию сайта на PythonAnywhere. Краткий обзор необходимых шагов...

* Сначала загружаем код на GitHub

```bash
$ git status
[...]
$ git add --all .
$ git status
[...]
$ git commit -m "Modified templates to display posts from database."
[...]
$ git push
```

* Затем заходим на [PythonAnywhere][4], открываем **Bash console** и набираем команду:

 [4]: https://www.pythonanywhere.com/consoles/

```bash
$ cd $USER.pythonanywhere.com
$ git pull
[...]
```

* Наконец, переключаемся на вкладку [Web][5] и жмём кнопку **Reload**. Обновления запущены в жизнь! Даже если записи в вашем блоге на PythonAnywhere отличаются от записей в блоге на локальном сервере, то всё в порядке. Базы данных на вашем локальном компьютере и на PythonAnywhere не синхронизируются, в отличиет от остальных файлов проекта.

 [5]: https://www.pythonanywhere.com/web_app_setup/

Поздравляем! Теперь попробуйте добавить новые записи через панель администратора Django (не забывай указывать published_date!). Удостоверьтесь, что вы в панели администратора своего сайта на PythonAnywhere (https://yourname.pythonanywhere.com/admin). Затем обновите страницу, чтобы проверить, появились ли новые записи.

Работает как по волшебству? Есть чем гордиться! Отойдите от компьютера на секунду — вы заслужили перерыв :)

![Рисунок 13.4][6]

 [6]: https://user-images.githubusercontent.com/4215285/72191710-2a2ffe00-3414-11ea-84e5-c5d4e6530dc7.png
