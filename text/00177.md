## Введение

NodeJS (или просто "Node") набирает популярность с момента создания в 2009 году. Интернет наводнен курсами и статьями о Node, любая фронтент-разработка так или иначе связанна с Node, и, конечно, количества рабочих мест, в которых требуется знание данного инструмента неуклонно растет.

### По окончанию

К концу этого урока вы сможете:

- Расказать о назначении сервера;
- Описать различия между статическими и динамическими сайтами;
- Объяснить, почему может вам понадобиться серверная часть для проекта и почему нет;
- Объясните цикл событий (event loop);
- Понять основы среды выполнения Node.js;
- Написать простой "hello world" и запустите его в консоли своей машины;
- Понять, что такое Node.js;

### Что _такое_ Node?

[Сайт Node.js](https://nodejs.org/en/about/) говорит нам:

> "As an asyncronous event driven JavaScript runtime, Node is designed to build scalable network applications."
> 
> Или на русском:
> 
> "Являясь асинхронной событийно-ориентированной средой исполнения JavaScript, Node была разработана для создания масштабируемых сетевых приложений".

Определение требует небольшого объяснения.

Немаловажно понять, что Node - это "среда выполнения JavaScript". Когда JavaScript был создан, он был разработан для запуска *в браузере*. Невозможно было использовать JavaScript для написания не веб-сайтов. Node выбрасывает JavaScript _за пределы_ браузера, что позволяет разработчикам использовать JavaScript для написания всего того, что могут делать другие популярные серверные языки (Ruby, PHP, C#, Python и т.д.). Таким образом, на самом базовом уровне Node просто позволяет запускать код JavaScript на компьютере, например на локальном компьютере или на сервере, без веб-браузера.

Для этого Node обладает дополнительным функционалом, которого нет в стандартном браузерном JavaScript. Например, возможность чтения и записи локальных файлов, создания http-соединений и прослушивания сетевых запросов.

### Событийно-ориентированность или Event Driven

Вернемся к определению на сайте: Node - это **асинхронная событийно-ориентированная** среда выполнения JavaScript. В этом контексте **асинхронная** означает, что при написании кода, вы не пытаетесь предсказать точную последовательность выполнения каждой строки. Вместо этого ваш код - набор небольших функций, которые вызываются в ответ на определенные события, такие как сетевой запрос (**событийно-ориентированная**).

Например, вы пишете программу: она должна прочитать некоторый текст из файла, вывести этот текст на консоли, запросить в базе данных список пользователей и отфильтровать пользователей по возрасту.

Вместо того, чтобы указывать вашему коду выполнять эти шаги последовательно:

1. Считать файл;
2. Распечатать содержимое файла;
3. Запрос в базу данных;
4. Фильтруем результаты запроса к базе данных.

Вы можете разбить задачу таким образом:

1. Считываем файл _И ТОЛЬКО ПОСЛЕ_ распечатываем содержимое файла;
2. Делаем запрос в базу данных _И ТОЛЬКО ПОСЛЕ_ фильтруем результаты запроса к базе данных.

Когда вы запустите программу, Node начнёт с первого шага - считывания файла. Поскольку это действие занимает некоторое время, Node параллельно начнет выполнение второго шага - запрос к базе данных.

Пока оба эти процесса работают, Node ждет _события_. Node ожидает завершения обоих процессов - чтения файла и запроса к базе данных. Когда любая из этих задач завершена, Node запустит событие, которое в свою очередь запустит следующую определенную нами функцию. Таким образом, если процесс чтения файла завершится первым, Node напечатает содержимое файла. Если запрос к базе данных завершится первым, Node запустит процесс фильтрации. Как программисты, мы не знаем в каком порядке будут завершены эти два процесса. Если бы этот код обрабатывался синхронно (а не асинхронно), нам пришлось бы ждать выполнения каждого шага в программе прежде чем переходить к следующему. Это приводит к значительному замедлению. Если файл, который нужно прочитать, будет очень длинным, то нам придется ждать несколько секунд, прежде чем начать запрос к базе данных.

Этот процесс похож на использование `addEventListener` в стандартном JavaScript при ожидания действий пользователя, щелчка мыши или нажатия клавиатуры. Основное отличие состоит в том, что события в Node будут связаны с сетевыми запросами и запросами к базе данных. Этот функционал упрощается за счет использования обратных вызовов (callback). Обратные вызовы невероятно важны в Node, поэтому потратьте минуту, чтобы прочитать [эту статью](https://briggs.dev/blog/understanding-callbacks) или [эту на русском](https://ru.hexlet.io/blog/posts/javascript-what-the-heck-is-a-callback).

Глянем простой пример из реальной жизни:

~~~javascript
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/html'});
  res.end('Привет Мир!');
}).listen(8080);
~~~

Этот фрагмент взят из самого первого урока, с которым вы скоро столкнетесь. По сути, этот код создает сервер и говорит: "каждый раз, когда получаем сетевой запрос, мы запускаем функцию обратного вызова". Эта функция отправляет ответ с текстом "Привет Мир!" на полученный запрос. Если вы зайдете в браузер и перейдете по нужному адресу и порту (localhost:8080), вы увидите этот текст на своем экране.

### Задание

1. [Краткий модуль](https://developer.mozilla.org/ru/docs/Learn/Server-side/First_steps) "На стороне сервера" от MDN является отличным источником начальных знаний. Прочитайте, по крайней мере, первые две статьи из руководства: "Введение в серверную часть" и "Обзор Клиент-Сервера". Оставшиеся интересны и заслуживают внимания, но не имеют отношения к нашим вопросам;
2. Чтобы немного лучше понять природу Node и осознать оставшуюся часть вышеприведенного определения, прочитайте [эту статью](https://medium.freecodecamp.org/what-exactly-is-node-js-ae36e97449f5). В этой статье есть длинное, но *действительно* фантастическое видео ([Перевод на русский](https://www.youtube.com/watch?v=8cV4ZvHXQL4)). Не пропустите его!
3. Уделите минуту или две на просмотр основного [веб-сайта Node.js](https://nodejs.org/en/). Начальная статья является *слишком* базовой для наших нужд, а документация по API *слишком* сложной, чтобы мы могли ее использовать. Но мы будем знакомиться с этим ресурсом по мере нашего прогресса;
4. [Это короткое видео](https://www.youtube.com/watch?v=uVwtVBpw7RQ) и [это на русском](https://www.youtube.com/watch?v=N-4p2_NEr9w) также является отличным введением в Node!

### Дополнительные ресурсы

_Этот раздел содержит полезные ссылки на дополнительные материалы. Они не обязательны, так что расценивайте их как нечто полезное, если вы хотите поглубже погрузиться в тему:_

- <span class="btn-fill btn btn-xs btn-success">eng</span> Прочтите эту статью [7 замечательных вещей, которые вы можете создать с помощью Node.js](https://blog.teamtreehouse.com/7-awesome-things-can-build-node-js).

### Проверка знаний

В данном разделе содержатся вопросы, которые проверят ваше понимание данного урока. Если у вас не получается самостоятельно ответить на некоторые вопросы, жмакните на стрелку слева от вопроса и получите ответ.

<details>
<summary>Что такое Node?</summary>
<ul><ul>
  <li>Node.js - это кроссплатформенная среда выполнения JavaScript с открытым исходным кодом, созданная для запуска вне браузера.</li>
</ul></ul>
</details>

### Источник

Данный материал основан на [TheOdinProject](https://github.com/TheOdinProject), созданном [Erik Trautman](https://github.com/eriktrautman).
